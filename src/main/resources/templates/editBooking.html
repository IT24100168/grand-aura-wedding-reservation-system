<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Booking ‚Äî Grand Aura</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/home.css" />
</head>
<body>

<header class="ga-header">
    <div class="ga-nav">
        <div class="ga-logo">Grand Aura</div>
        <nav class="ga-menu">
            <a href="/">Home</a>
            <a href="/bookings/my">My Bookings</a>
            <a href="/logout">Logout</a>
        </nav>
    </div>
</header>

<section class="ga-form-hero">
    <div class="ga-form-hero-inner">
        <h1 class="ga-hero-title">Edit Your Celebration</h1>
        <p class="ga-hero-sub">Refine the details of your special day.</p>
    </div>
</section>

<section class="ga-form-section">
    <div class="ga-form-card">
        <div th:if="${message}" class="ga-alert ga-alert-success" th:text="${message}"></div>
        <form th:action="@{'/api/bookings/' + ${booking.id} + '/edit'}" th:object="${booking}" method="post">
            <div th:if="${_csrf}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            </div>

            <div class="ga-field">
                <label>Booking ID</label>
                <div style="padding: 12px 14px; background: #f8f9fa; border-radius: 10px; color: #666; font-family: monospace;" th:text="${booking.id}"></div>
            </div>

            <div class="ga-grid-2">
                <div class="ga-field">
                    <label for="customerName">Customer Name</label>
                    <input class="ga-input" id="customerName" type="text" th:field="*{customerName}" required maxlength="100" />
                    <div class="ga-error" th:if="${#fields.hasErrors('customerName')}" th:errors="*{customerName}"></div>
                </div>
                <div class="ga-field">
                    <label for="customerEmail">Email</label>
                    <input class="ga-input" id="customerEmail" type="email" th:field="*{customerEmail}" required maxlength="160" readonly style="background: #f8f9fa;" />
                    <div class="ga-error" th:if="${#fields.hasErrors('customerEmail')}" th:errors="*{customerEmail}"></div>
                </div>
            </div>

            <div class="ga-grid-2">
                <div class="ga-field">
                    <label for="guestCount">Guest Count</label>
                    <input class="ga-input" id="guestCount" type="number" th:field="*{guestCount}" min="1" required />
                    <div class="ga-error" th:if="${#fields.hasErrors('guestCount')}" th:errors="*{guestCount}"></div>
                </div>
                <div class="ga-field">
                    <label for="weddingDate">Wedding Date</label>
                    <input class="ga-input" id="weddingDate" type="date" th:field="*{weddingDate}" required />
                    <div class="ga-error" th:if="${#fields.hasErrors('weddingDate')}" th:errors="*{weddingDate}"></div>
                </div>
            </div>

            <div class="ga-field">
                <label for="venue">Preferred Venue</label>
                <select class="ga-input" th:field="*{venue}" id="venue" required>
                    <option value="">Select a venue</option>
                    <option value="Chequerboard - Up to 1000 pax">Chequerboard - Up to 1000 pax</option>
                    <option value="Jubilee Ballroom - 150 to 200 pax">Jubilee Ballroom - 150 to 200 pax</option>
                    <option value="Grand Ballroom - 250 to 280 pax">Grand Ballroom - 250 to 280 pax</option>
                </select>
                <div class="ga-error" th:if="${#fields.hasErrors('venue')}" th:errors="*{venue}"></div>
            </div>

            <!-- Catering Services Section -->
            <div class="ga-section-divider">
                <h3>üçΩÔ∏è Catering Services</h3>
                <p>Update your catering preferences for your special day</p>
            </div>

            <div class="ga-grid-2">
                <div class="ga-field">
                    <label for="brideName">Bride's Name</label>
                    <input class="ga-input" type="text" th:field="*{brideName}" id="brideName" maxlength="100" placeholder="Enter bride's name">
                </div>
                <div class="ga-field">
                    <label for="groomName">Groom's Name</label>
                    <input class="ga-input" type="text" th:field="*{groomName}" id="groomName" maxlength="100" placeholder="Enter groom's name">
                </div>
            </div>

            <div class="ga-grid-2">
                <div class="ga-field">
                    <label for="preferredVenue">Preferred Venue</label>
                    <select class="ga-input" th:field="*{preferredVenue}" id="preferredVenue">
                        <option value="">Select preferred venue</option>
                        <option value="Chequerboard - Up to 1000 pax">Chequerboard - Up to 1000 pax</option>
                        <option value="Jubilee Ballroom - 150 to 200 pax">Jubilee Ballroom - 150 to 200 pax</option>
                        <option value="Grand Ballroom - 250 to 280 pax">Grand Ballroom - 250 to 280 pax</option>
                    </select>
                </div>
                <div class="ga-field">
                    <label for="cateringPackage">Catering Package</label>
                    <select class="ga-input" th:field="*{cateringPackage}" id="cateringPackage">
                        <option value="">Select catering package</option>
                        <option value="Classic Wedding Menu">Classic Wedding Menu - Rs. 7,500 per guest</option>
                        <option value="Premium Wedding Menu">Premium Wedding Menu - Rs. 9,500 per guest</option>
                        <option value="Luxury Wedding Menu">Luxury Wedding Menu - Rs. 12,500 per guest</option>
                        <option value="Custom Menu">Custom Menu - Contact for pricing</option>
                    </select>
                </div>
            </div>

            <!-- Menu Item Selection -->
            <div class="ga-field">
                <label>Select Menu Items</label>
                <div class="ga-menu-selection">
                    <p class="ga-menu-description">Choose from our curated menu items for your special day. You can select multiple items from each category.</p>
                    
                    <!-- Appetizers -->
                    <div class="ga-menu-category" th:if="${#lists.size(availableMenus.?[category == 'Appetizer'])} > 0">
                        <h4>ü•ó Appetizers</h4>
                        <div class="ga-menu-items">
                            <div th:each="menu : ${availableMenus}" th:if="${menu.category == 'Appetizer'}" class="ga-menu-item">
                                <label class="ga-menu-checkbox">
                                    <input type="checkbox" th:value="${menu.name}" name="selectedMenuItems" 
                                           th:checked="${booking.selectedMenuItems != null and #strings.contains(booking.selectedMenuItems, menu.name)}">
                                    <span class="ga-menu-name" th:text="${menu.name}">Menu Item</span>
                                    <span class="ga-menu-price" th:text="'Rs. ' + ${#numbers.formatDecimal(menu.price, 0, 2)}">Rs. 0.00</span>
                                    <span class="ga-menu-desc" th:text="${menu.description}">Description</span>
                                    <span class="ga-menu-dietary" th:if="${menu.dietaryInfo != null}" th:text="${menu.dietaryInfo}">Dietary Info</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Main Courses -->
                    <div class="ga-menu-category" th:if="${#lists.size(availableMenus.?[category == 'Main Course'])} > 0">
                        <h4>üçΩÔ∏è Main Courses</h4>
                        <div class="ga-menu-items">
                            <div th:each="menu : ${availableMenus}" th:if="${menu.category == 'Main Course'}" class="ga-menu-item">
                                <label class="ga-menu-checkbox">
                                    <input type="checkbox" th:value="${menu.name}" name="selectedMenuItems" 
                                           th:checked="${booking.selectedMenuItems != null and #strings.contains(booking.selectedMenuItems, menu.name)}">
                                    <span class="ga-menu-name" th:text="${menu.name}">Menu Item</span>
                                    <span class="ga-menu-price" th:text="'Rs. ' + ${#numbers.formatDecimal(menu.price, 0, 2)}">Rs. 0.00</span>
                                    <span class="ga-menu-desc" th:text="${menu.description}">Description</span>
                                    <span class="ga-menu-dietary" th:if="${menu.dietaryInfo != null}" th:text="${menu.dietaryInfo}">Dietary Info</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Desserts -->
                    <div class="ga-menu-category" th:if="${#lists.size(availableMenus.?[category == 'Dessert'])} > 0">
                        <h4>üç∞ Desserts</h4>
                        <div class="ga-menu-items">
                            <div th:each="menu : ${availableMenus}" th:if="${menu.category == 'Dessert'}" class="ga-menu-item">
                                <label class="ga-menu-checkbox">
                                    <input type="checkbox" th:value="${menu.name}" name="selectedMenuItems" 
                                           th:checked="${booking.selectedMenuItems != null and #strings.contains(booking.selectedMenuItems, menu.name)}">
                                    <span class="ga-menu-name" th:text="${menu.name}">Menu Item</span>
                                    <span class="ga-menu-price" th:text="'Rs. ' + ${#numbers.formatDecimal(menu.price, 0, 2)}">Rs. 0.00</span>
                                    <span class="ga-menu-desc" th:text="${menu.description}">Description</span>
                                    <span class="ga-menu-dietary" th:if="${menu.dietaryInfo != null}" th:text="${menu.dietaryInfo}">Dietary Info</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Beverages -->
                    <div class="ga-menu-category" th:if="${#lists.size(availableMenus.?[category == 'Beverage'])} > 0">
                        <h4>ü•§ Beverages</h4>
                        <div class="ga-menu-items">
                            <div th:each="menu : ${availableMenus}" th:if="${menu.category == 'Beverage'}" class="ga-menu-item">
                                <label class="ga-menu-checkbox">
                                    <input type="checkbox" th:value="${menu.name}" name="selectedMenuItems" 
                                           th:checked="${booking.selectedMenuItems != null and #strings.contains(booking.selectedMenuItems, menu.name)}">
                                    <span class="ga-menu-name" th:text="${menu.name}">Menu Item</span>
                                    <span class="ga-menu-price" th:text="'Rs. ' + ${#numbers.formatDecimal(menu.price, 0, 2)}">Rs. 0.00</span>
                                    <span class="ga-menu-desc" th:text="${menu.description}">Description</span>
                                    <span class="ga-menu-dietary" th:if="${menu.dietaryInfo != null}" th:text="${menu.dietaryInfo}">Dietary Info</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ga-field">
                <label for="dietaryRequirements">Dietary Requirements</label>
                <textarea class="ga-input ga-textarea" th:field="*{dietaryRequirements}" id="dietaryRequirements" maxlength="500" placeholder="Vegetarian, vegan, gluten-free, allergies, religious dietary restrictions, etc."></textarea>
            </div>

            <div class="ga-field">
                <label for="specialCateringRequests">Special Catering Requests</label>
                <textarea class="ga-input ga-textarea" th:field="*{specialCateringRequests}" id="specialCateringRequests" maxlength="500" placeholder="Signature cocktails, custom cake flavors, cultural dishes, etc."></textarea>
            </div>

            <div class="ga-field">
                <label for="specialRequests">Additional Special Requests</label>
                <textarea class="ga-input ga-textarea" id="specialRequests" th:field="*{specialRequests}" maxlength="500" placeholder="Allergies, decor style, ceremony traditions, etc."></textarea>
            </div>

            <div class="ga-actions">
                <a class="ga-cta ga-cta-secondary" href="/bookings/my">Cancel</a>
                <button class="ga-cta" type="submit">Save Changes</button>
            </div>
        </form>
    </div>
</section>

</body>
</html>

