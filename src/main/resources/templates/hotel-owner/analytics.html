<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - Hotel Owner Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/hotel-owner.css">
</head>
<body class="ho-body">
    
    <!-- Hotel Owner Header -->
    <header class="ho-header">
        <div class="ho-nav">
            <div class="ho-logo">
                <h1>Grand Aura</h1>
                <span class="ho-role">Hotel Owner Dashboard</span>
            </div>
            <nav class="ho-menu">
                <a href="/hotel-owner/dashboard">Dashboard</a>
                <a href="/hotel-owner/bookings">All Bookings</a>
                <a href="/hotel-owner/analytics" class="ho-active">Analytics</a>
                <a href="/hotel-owner/venues">Venues</a>
                <a href="/hotel-owner/profile">Profile</a>
                <a href="/logout" class="ho-logout">Logout</a>
            </nav>
        </div>
    </header>

    <main class="ho-main">
        <section class="ho-analytics">
            <div class="ho-container">
                <div class="ho-page-header">
                    <h2>Analytics & Reports</h2>
                    <p class="ho-subtitle">Comprehensive insights into your hotel's booking performance</p>
                </div>

                <!-- Key Statistics -->
                <div class="ho-stats-overview">
                    <h3>Key Performance Indicators</h3>
                    <div class="ho-stats-grid">
                        <div class="ho-stat-card">
                            <div class="ho-stat-icon">üìä</div>
                            <div class="ho-stat-content">
                                <h4 th:text="${statistics.totalBookings}">0</h4>
                                <p>Total Bookings</p>
                            </div>
                        </div>
                        
                        <div class="ho-stat-card">
                            <div class="ho-stat-icon">üë•</div>
                            <div class="ho-stat-content">
                                <h4 th:text="${statistics.totalGuests}">0</h4>
                                <p>Total Guests</p>
                            </div>
                        </div>
                        
                        <div class="ho-stat-card">
                            <div class="ho-stat-icon">üìà</div>
                            <div class="ho-stat-content">
                                <h4 th:text="${#numbers.formatDecimal(statistics.averageGuestCount, 1, 1)}">0.0</h4>
                                <p>Average Guests</p>
                            </div>
                        </div>
                        
                        <div class="ho-stat-card">
                            <div class="ho-stat-icon">üìÖ</div>
                            <div class="ho-stat-content">
                                <h4 th:text="${statistics.upcomingBookings}">0</h4>
                                <p>Upcoming Events</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Venue Utilization -->
                <div class="ho-chart-section">
                    <h3>Venue Utilization</h3>
                    <div class="ho-chart-container">
                        <div class="ho-venue-stats">
                            <div th:each="venue : ${venueUtilization}" class="ho-venue-item">
                                <div class="ho-venue-name" th:text="${venue.key}">Venue Name</div>
                                <div class="ho-venue-bar">
                                    <div class="ho-venue-fill" 
                                         th:style="'width: ' + ${venue.value * 10} + '%;'"></div>
                                </div>
                                <div class="ho-venue-count" th:text="${venue.value}">0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Monthly Statistics -->
                <div class="ho-chart-section">
                    <h3>Monthly Booking Trends</h3>
                    <div class="ho-chart-container">
                        <div class="ho-monthly-stats">
                            <div th:each="month : ${monthlyStats}" class="ho-month-item">
                                <div class="ho-month-name" th:text="${month.key}">Month</div>
                                <div class="ho-month-bar">
                                    <div class="ho-month-fill" 
                                         th:style="'width: ' + ${month.value * 20} + '%;'"></div>
                                </div>
                                <div class="ho-month-count" th:text="${month.value}">0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Most Popular Venue -->
                <div class="ho-highlight-section">
                    <h3>Most Popular Venue</h3>
                    <div class="ho-highlight-card">
                        <div class="ho-highlight-icon">üèÜ</div>
                        <div class="ho-highlight-content">
                            <h4 th:text="${statistics.mostPopularVenue}">No bookings yet</h4>
                            <p>This venue has the highest number of bookings</p>
                        </div>
                    </div>
                </div>

                <!-- Revenue Estimation -->
                <div class="ho-revenue-section">
                    <h3>Revenue Estimation</h3>
                    <div class="ho-revenue-card">
                        <div class="ho-revenue-content">
                            <h4>Estimated Revenue</h4>
                            <p class="ho-revenue-note">Based on average pricing per guest</p>
                            <div class="ho-revenue-options">
                                <label for="pricePerGuest">Price per Guest ($):</label>
                                <input type="number" id="pricePerGuest" value="50" min="0" step="0.01" class="ho-input">
                                <button onclick="calculateRevenue()" class="ho-btn ho-btn-primary">Calculate</button>
                            </div>
                            <div id="revenueResult" class="ho-revenue-result" style="display: none;">
                                <h5>Estimated Total Revenue: $<span id="revenueAmount">0</span></h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="ho-footer">
        <div class="ho-container">
            <p>&copy; 2025 Grand Aura Hotel Management System. All rights reserved.</p>
        </div>
    </footer>

    <script>
        function calculateRevenue() {
            const pricePerGuest = document.getElementById('pricePerGuest').value;
            const totalGuests = /*[[${statistics.totalGuests}]]*/ 0;
            const totalRevenue = pricePerGuest * totalGuests;
            
            document.getElementById('revenueAmount').textContent = totalRevenue.toFixed(2);
            document.getElementById('revenueResult').style.display = 'block';
        }
    </script>

</body>
</html>
